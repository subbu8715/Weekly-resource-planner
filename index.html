<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resource Availability Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .status-cell {
      min-width: 90px; height: 55px; 
      display: flex; align-items: center; justify-content: center;
      border-radius: 0.5rem; font-weight: 600;
    }
    .status-wfo { background-color: #166534; color: white; } /* Dark Green */
    .status-wfh { background-color: #86efac; color: #14532d; } /* Light Green */
    .status-planned-leave { background-color: #f97316; color: white; } /* Orange */
    .status-unplanned-leave { background-color: #b91c1c; color: white; } /* Dark Red */
    .status-default { background-color: #f3f4f6; color: #374151; } /* Gray */
  </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">

  <div class="container mx-auto p-6">
    <header class="text-center mb-6">
      <h1 class="text-4xl font-bold text-gray-900">Resource Availability Tracker</h1>
    </header>

    <div class="bg-white rounded-xl shadow-lg p-4 overflow-x-auto">
      <table class="w-full border-collapse">
        <thead class="bg-gray-100">
          <tr>
            <th class="p-2 border">Name</th>
            <th class="p-2 border">Role</th>
            <th class="p-2 border">Shift</th>
            <th class="p-2 border">Region</th>
            <th class="p-2 border">Mon</th>
            <th class="p-2 border">Tue</th>
            <th class="p-2 border">Wed</th>
            <th class="p-2 border">Thu</th>
            <th class="p-2 border">Fri</th>
            <th class="p-2 border">Sat</th>
            <th class="p-2 border">Sun</th>
          </tr>
        </thead>
        <tbody id="planner-body"></tbody>
      </table>
    </div>

    <!-- Legend -->
    <div class="mt-6">
      <h2 class="text-xl font-semibold mb-2">Legend</h2>
      <div class="flex gap-4 flex-wrap">
        <span class="status-cell status-wfo">WFO</span>
        <span class="status-cell status-wfh">WFH</span>
        <span class="status-cell status-planned-leave">Planned Leave</span>
        <span class="status-cell status-unplanned-leave">Unplanned Leave</span>
        <span class="status-cell status-default">No Data</span>
      </div>
    </div>
  </div>

  <script>
    function getStatusClass(status) {
      if (!status) return "status-default";
      switch (status.trim().toLowerCase()) {
        case "wfo": return "status-wfo";
        case "wfh": return "status-wfh";
        case "planned leave": return "status-planned-leave";
        case "unplanned leave": return "status-unplanned-leave";
        default: return "status-default";
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      Papa.parse("https://subbu8715.github.io/Weekly-resource-planner/Resourcetracker.csv", {
        download: true,
        header: true,
        skipEmptyLines: true,
        complete: function(results) {
          console.log("CSV parsed:", results.data);
          const tbody = document.getElementById("planner-body");
          tbody.innerHTML = "";

          results.data.forEach(row => {
            const tr = document.createElement("tr");

            tr.innerHTML = `
              <td class="p-2 border font-bold">${row["Name"] || ""}</td>
              <td class="p-2 border">${row["Role"] || ""}</td>
              <td class="p-2 border">${row["Shift Timings"] || ""}</td>
              <td class="p-2 border">${row["Region Supported"] || ""}</td>
            `;

            ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].forEach(day => {
              const status = row[day];
              const td = document.createElement("td");
              td.className = "p-2 border";
              td.innerHTML = `<div class="status-cell ${getStatusClass(status)}">${status || ""}</div>`;
              tr.appendChild(td);
            });

            tbody.appendChild(tr);
          });
        },
        error: function(err) {
          console.error("Error loading CSV:", err);
        }
      });
    });

    // Placeholder for bulk-edit (future expansion)
    // Bulk edit logic should only apply Monâ€“Fri:
    // ["Mon","Tue","Wed","Thu","Fri"]
  </script>
</body>
</html>


